<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Leo's Busy City Adventure</title>
    <style>
        :root {
            --primary-color: #FF9F1C;
            --secondary-color: #2EC4B6;
            --accent-color: #E71D36;
            --bg-color: #CBF3F0;
            --text-color: #333;
            --card-bg: #ffffff;
        }

        body {
            font-family: 'Comic Sans MS', 'Chalkboard SE', sans-serif;
            background-color: var(--bg-color);
            color: var(--text-color);
            margin: 0;
            padding: 20px;
            line-height: 1.6;
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
            background-color: var(--card-bg);
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.1);
        }

        h1 {
            text-align: center;
            color: var(--accent-color);
            font-size: 2.5rem;
            margin-bottom: 30px;
            text-shadow: 2px 2px 0px #FFD700;
        }

        /* Controls */
        .controls {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-bottom: 30px;
            flex-wrap: wrap;
        }

        button {
            padding: 12px 24px;
            font-size: 1rem;
            border: none;
            border-radius: 50px;
            cursor: pointer;
            font-family: inherit;
            font-weight: bold;
            transition: transform 0.2s, box-shadow 0.2s;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        button:hover {
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }

        .btn-translate {
            background-color: var(--primary-color);
            color: white;
        }

        .btn-read {
            background-color: var(--secondary-color);
            color: white;
        }

        .btn-stop {
            background-color: var(--accent-color);
            color: white;
        }

        /* Story Styles */
        .story-section {
            font-size: 1.2rem;
            margin-bottom: 40px;
        }

        .paragraph {
            margin-bottom: 25px;
            padding: 15px;
            border-left: 5px solid var(--secondary-color);
            background-color: #f9f9f9;
            border-radius: 0 10px 10px 0;
        }

        .vocab-word {
            color: #0077b6;
            font-weight: bold;
            cursor: pointer;
            border-bottom: 2px dotted #0077b6;
            transition: color 0.2s;
        }

        .vocab-word:hover {
            color: var(--accent-color);
            background-color: #ffe5e5;
        }

        .translation {
            display: none;
            color: #666;
            font-size: 1rem;
            margin-top: 10px;
            font-weight: normal;
            border-top: 1px dashed #ccc;
            padding-top: 8px;
        }

        .show-translation .translation {
            display: block;
        }

        /* Highlight Style for Reading */
        .highlight {
            background-color: #fffacd; /* Yellowish */
            box-shadow: 0 0 5px #ffd700;
            border-radius: 3px;
        }

        /* Quiz Styles */
        .quiz-section {
            background-color: #f0f8ff;
            padding: 25px;
            border-radius: 15px;
            border: 3px dashed var(--primary-color);
        }

        .quiz-title {
            text-align: center;
            color: var(--primary-color);
        }

        .question-block {
            margin-bottom: 20px;
            background: white;
            padding: 15px;
            border-radius: 10px;
        }

        .question-header {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 10px;
            font-weight: bold;
        }

        .speaker-icon {
            cursor: pointer;
            font-size: 1.2rem;
            background: #eee;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: background 0.2s;
        }

        .speaker-icon:hover {
            background: #ddd;
        }

        .options label {
            display: block;
            margin: 8px 0;
            cursor: pointer;
        }

        .result-area {
            text-align: center;
            font-size: 1.5rem;
            font-weight: bold;
            margin-top: 20px;
            min-height: 40px;
        }

        .correct { color: green; }
        .wrong { color: red; }

        @media (max-width: 600px) {
            h1 { font-size: 1.8rem; }
            .container { padding: 15px; }
            button { width: 100%; justify-content: center; }
        }
    </style>
</head>
<body>

<div class="container">
    <h1>Leo's Smart City Day</h1>

    <div class="controls">
        <button class="btn-translate" onclick="toggleTranslation()">ğŸŒ ä¸­æ–‡ç¿»è­¯ Show/Hide</button>
        <button class="btn-read" onclick="readFullStory()">ğŸ“– æœ—è®€æ•…äº‹ Read Story</button>
        <button class="btn-stop" onclick="stopAudio()">ğŸ›‘ åœæ­¢ Stop</button>
    </div>

    <div id="story-content" class="story-section">
        <div class="paragraph">
            <span class="sentence">Today is a special day for Leo.</span>
            <span class="sentence">He gets up and puts on his <span class="vocab-word" onclick="speakWord(this)">glasses</span>.</span>
            <span class="sentence">He wants to look good.</span>
            <span class="sentence">He opens his closet and sees a <span class="vocab-word" onclick="speakWord(this)">dress</span> and a <span class="vocab-word" onclick="speakWord(this)">skirt</span>, but those belong to his sister.</span>
            <span class="sentence">Leo chooses a cool <span class="vocab-word" onclick="speakWord(this)">T-shirt</span> and blue <span class="vocab-word" onclick="speakWord(this)">shorts</span>.</span>
            <span class="sentence">Because it is a little cold, he also puts on a <span class="vocab-word" onclick="speakWord(this)">sweater</span> and a <span class="vocab-word" onclick="speakWord(this)">jacket</span>.</span>
            <span class="sentence">He changes his shorts to long <span class="vocab-word" onclick="speakWord(this)">pants</span>.</span>
            <span class="sentence">Finally, he ties his <span class="vocab-word" onclick="speakWord(this)">sneakers</span>.</span>
            <div class="translation">
                ä»Šå¤©æ˜¯ Leo ç‰¹åˆ¥çš„ä¸€å¤©ã€‚ä»–èµ·åºŠä¸¦æˆ´ä¸Šä»–çš„çœ¼é¡ã€‚ä»–æƒ³è¦çœ‹èµ·ä¾†å¾ˆå¸¥æ°£ã€‚ä»–æ‰“é–‹è¡£æ«¥çœ‹åˆ°ä¸€ä»¶æ´‹è£å’Œä¸€æ¢è£™å­ï¼Œä½†é‚£æ˜¯ä»–å§å§çš„ã€‚Leo é¸äº†ä¸€ä»¶å¾ˆé…·çš„ Tæ¤å’Œè—è‰²çš„çŸ­è¤²ã€‚å› ç‚ºæœ‰é»å†·ï¼Œä»–é‚„ç©¿ä¸Šäº†æ¯›è¡£å’Œå¤¾å…‹ã€‚ä»–æŠŠçŸ­è¤²æ›æˆäº†é•·è¤²ã€‚æœ€å¾Œï¼Œä»–ç¶å¥½ä»–çš„é‹å‹•é‹ã€‚
            </div>
        </div>

        <div class="paragraph">
            <span class="sentence">Leo goes to the kitchen.</span>
            <span class="sentence">He drinks a <span class="vocab-word" onclick="speakWord(this)">glass</span> of milk.</span>
            <span class="sentence">He checks his bag.</span>
            <span class="sentence">He has his <span class="vocab-word" onclick="speakWord(this)">water bottle</span> and an <span class="vocab-word" onclick="speakWord(this)">umbrella</span> in case it rains.</span>
            <span class="sentence">He takes his <span class="vocab-word" onclick="speakWord(this)">smartphone</span>.</span>
            <span class="sentence">It is a very <span class="vocab-word" onclick="speakWord(this)">smart</span> <span class="vocab-word" onclick="speakWord(this)">phone</span>!</span>
            <div class="translation">
                Leo èµ°åˆ°å»šæˆ¿ã€‚ä»–å–äº†ä¸€æ¯ç‰›å¥¶ã€‚ä»–æª¢æŸ¥ä»–çš„åŒ…åŒ…ã€‚ä»–å¸¶äº†ä»–çš„æ°´å£ºï¼Œé‚„æœ‰ç‚ºäº†ä»¥é˜²ä¸‹é›¨å¸¶çš„é›¨å‚˜ã€‚ä»–æ‹¿äº†ä»–çš„æ™ºæ…§å‹æ‰‹æ©Ÿã€‚å®ƒæ˜¯ä¸€æ”¯éå¸¸è°æ˜çš„æ‰‹æ©Ÿï¼
            </div>
        </div>

        <div class="paragraph">
            <span class="sentence">Leo walks outside.</span>
            <span class="sentence">The street is busy.</span>
            <span class="sentence">He sees a fast <span class="vocab-word" onclick="speakWord(this)">car</span> and a yellow <span class="vocab-word" onclick="speakWord(this)">taxi</span>.</span>
            <span class="sentence">A big <span class="vocab-word" onclick="speakWord(this)">bus</span> stops near him.</span>
            <span class="sentence">Some people ride a <span class="vocab-word" onclick="speakWord(this)">bike</span> and a <span class="vocab-word" onclick="speakWord(this)">scooter</span>.</span>
            <span class="sentence">Leo does not drive.</span>
            <span class="sentence">He walks to the <span class="vocab-word" onclick="speakWord(this)">MRT</span> station.</span>
            <span class="sentence">He likes the <span class="vocab-word" onclick="speakWord(this)">train</span> because it is fast.</span>
            <span class="sentence">In the sky, he sees a huge <span class="vocab-word" onclick="speakWord(this)">plane</span> flying high.</span>
            <div class="translation">
                Leo èµ°åˆ°å¤–é¢ã€‚è¡—é“å¾ˆç¹å¿™ã€‚ä»–çœ‹åˆ°ä¸€è¼›å¿«è»Šå’Œä¸€è¼›é»ƒè‰²çš„è¨ˆç¨‹è»Šã€‚ä¸€è¼›å¤§å…¬è»Šåœåœ¨ä»–é™„è¿‘ã€‚æœ‰äº›äººé¨è…³è¸è»Šå’Œæ©Ÿè»Šã€‚Leo ä¸é–‹è»Šã€‚ä»–èµ°åˆ°æ·é‹ç«™ã€‚ä»–å–œæ­¡ç«è»Šå› ç‚ºå®ƒå¾ˆå¿«ã€‚åœ¨å¤©ç©ºä¸­ï¼Œä»–çœ‹åˆ°ä¸€æ¶å·¨å¤§çš„é£›æ©Ÿé£›å¾—å¾ˆé«˜ã€‚
            </div>
        </div>

        <div class="paragraph">
            <span class="sentence">First, Leo goes to the <span class="vocab-word" onclick="speakWord(this)">bakery</span> to buy bread.</span>
            <span class="sentence">Then, he visits the <span class="vocab-word" onclick="speakWord(this)">bookstore</span> to buy a comic book.</span>
            <span class="sentence">He walks past the <span class="vocab-word" onclick="speakWord(this)">bank</span> and the <span class="vocab-word" onclick="speakWord(this)">post office</span>.</span>
            <span class="sentence">He needs to check the <span class="vocab-word" onclick="speakWord(this)">post</span>.</span>
            <span class="sentence">Later, he visits his dad at his <span class="vocab-word" onclick="speakWord(this)">office</span>.</span>
            <span class="sentence">His mom is not there because she works at the <span class="vocab-word" onclick="speakWord(this)">hospital</span>.</span>
            <span class="sentence">Finally, the family meets at a nice <span class="vocab-word" onclick="speakWord(this)">restaurant</span> for dinner.</span>
            <div class="translation">
                é¦–å…ˆï¼ŒLeo å»éºµåŒ…åº—è²·éºµåŒ…ã€‚ç„¶å¾Œï¼Œä»–å»æ›¸åº—è²·ä¸€æœ¬æ¼«ç•«æ›¸ã€‚ä»–èµ°ééŠ€è¡Œå’Œéƒµå±€ã€‚ä»–éœ€è¦æª¢æŸ¥éƒµä»¶ã€‚ç¨å¾Œï¼Œä»–å»çˆ¸çˆ¸çš„è¾¦å…¬å®¤æ‰¾ä»–ã€‚ä»–åª½åª½ä¸åœ¨é‚£è£¡ï¼Œå› ç‚ºå¥¹åœ¨é†«é™¢å·¥ä½œã€‚æœ€å¾Œï¼Œå…¨å®¶äººåœ¨ä¸€é–“å¾ˆæ£’çš„é¤å»³é›†åˆåƒæ™šé¤ã€‚
            </div>
        </div>
    </div>

    <div class="quiz-section">
        <h2 class="quiz-title">ğŸ§© Reading Quiz</h2>
        
        <div class="question-block" id="q1">
            <div class="question-header">
                <div class="speaker-icon" onclick="speakQuestion('q1')">ğŸ”Š</div>
                <span>1. What did Leo put on his feet?</span>
            </div>
            <div class="options">
                <label><input type="radio" name="q1" value="wrong"> A) Sandals</label>
                <label><input type="radio" name="q1" value="correct"> B) Sneakers</label>
                <label><input type="radio" name="q1" value="wrong"> C) Boots</label>
            </div>
        </div>

        <div class="question-block" id="q2">
            <div class="question-header">
                <div class="speaker-icon" onclick="speakQuestion('q2')">ğŸ”Š</div>
                <span>2. How did Leo travel to the city?</span>
            </div>
            <div class="options">
                <label><input type="radio" name="q2" value="wrong"> A) By taxi</label>
                <label><input type="radio" name="q2" value="correct"> B) By MRT</label>
                <label><input type="radio" name="q2" value="wrong"> C) By scooter</label>
            </div>
        </div>

        <div class="question-block" id="q3">
            <div class="question-header">
                <div class="speaker-icon" onclick="speakQuestion('q3')">ğŸ”Š</div>
                <span>3. Where did Leo buy bread?</span>
            </div>
            <div class="options">
                <label><input type="radio" name="q3" value="wrong"> A) At the bookstore</label>
                <label><input type="radio" name="q3" value="wrong"> B) At the bank</label>
                <label><input type="radio" name="q3" value="correct"> C) At the bakery</label>
            </div>
        </div>

        <div class="question-block" id="q4">
            <div class="question-header">
                <div class="speaker-icon" onclick="speakQuestion('q4')">ğŸ”Š</div>
                <span>4. Where does Leo's mom work?</span>
            </div>
            <div class="options">
                <label><input type="radio" name="q4" value="correct"> A) At the hospital</label>
                <label><input type="radio" name="q4" value="wrong"> B) At the office</label>
                <label><input type="radio" name="q4" value="wrong"> C) At the post office</label>
            </div>
        </div>

        <div class="question-block" id="q5">
            <div class="question-header">
                <div class="speaker-icon" onclick="speakQuestion('q5')">ğŸ”Š</div>
                <span>5. What does Leo have in case it rains?</span>
            </div>
            <div class="options">
                <label><input type="radio" name="q5" value="wrong"> A) A smartphone</label>
                <label><input type="radio" name="q5" value="correct"> B) An umbrella</label>
                <label><input type="radio" name="q5" value="wrong"> C) A water bottle</label>
            </div>
        </div>

        <div style="text-align: center;">
            <button class="btn-read" onclick="checkAnswers()" style="margin: 0 auto; background-color: #4CAF50;">âœ… Check Answers</button>
        </div>
        <div id="result" class="result-area"></div>
    </div>
</div>

<script>
    const synth = window.speechSynthesis;
    let currentUtterance = null;

    // 1. Toggle Translation
    function toggleTranslation() {
        const content = document.getElementById('story-content');
        content.classList.toggle('show-translation');
    }

    // 2. Stop Audio
    function stopAudio() {
        synth.cancel();
        removeHighlights();
    }

    // Helper: Remove all highlights
    function removeHighlights() {
        const highlighted = document.querySelectorAll('.highlight');
        highlighted.forEach(el => el.classList.remove('highlight'));
    }

    // 3. Speak Single Word
    function speakWord(element) {
        stopAudio();
        const word = element.innerText;
        element.classList.add('highlight');
        
        const utterance = new SpeechSynthesisUtterance(word);
        utterance.lang = 'en-US';
        utterance.rate = 0.8;
        
        utterance.onend = () => {
            element.classList.remove('highlight');
        };

        synth.speak(utterance);
    }

    // 4. Read Full Story (Sentence by Sentence)
    function readFullStory() {
        stopAudio();
        const sentences = document.querySelectorAll('.sentence');
        let index = 0;

        function speakSentence() {
            if (index >= sentences.length) return;

            const el = sentences[index];
            el.classList.add('highlight');
            
            // Get text, ignoring the translation hidden inside if structure changes, 
            // but currently structure is span.sentence contains span.vocab. TextContent is safe.
            const text = el.textContent; 

            const utterance = new SpeechSynthesisUtterance(text);
            utterance.lang = 'en-US';
            utterance.rate = 0.9;

            utterance.onend = () => {
                el.classList.remove('highlight');
                index++;
                speakSentence();
            };

            utterance.onerror = () => {
                el.classList.remove('highlight');
            };

            currentUtterance = utterance;
            synth.speak(utterance);
        }

        speakSentence();
    }

    // 5. Read Question
    function speakQuestion(questionId) {
        stopAudio();
        const container = document.getElementById(questionId);
        
        // Construct text to read: Question + Options
        const questionText = container.querySelector('.question-header span').innerText;
        const labels = container.querySelectorAll('.options label');
        let fullText = questionText + ". ";
        labels.forEach(label => {
            fullText += label.innerText + ". ";
        });

        container.classList.add('highlight');

        const utterance = new SpeechSynthesisUtterance(fullText);
        utterance.lang = 'en-US';
        utterance.rate = 0.9;

        utterance.onend = () => {
            container.classList.remove('highlight');
        };

        synth.speak(utterance);
    }

    // 6. Check Answers
    function checkAnswers() {
        let score = 0;
        const total = 5;
        const resultDiv = document.getElementById('result');
        
        // Clear previous colors
        document.querySelectorAll('.options label').forEach(l => l.style.color = 'inherit');

        for (let i = 1; i <= total; i++) {
            const q = document.querySelector(`input[name="q${i}"]:checked`);
            if (q) {
                if (q.value === "correct") {
                    score++;
                    q.parentElement.style.color = "green";
                    q.parentElement.style.fontWeight = "bold";
                } else {
                    q.parentElement.style.color = "red";
                }
            }
        }

        resultDiv.innerText = `You got ${score} out of ${total} correct! ${score === 5 ? 'ğŸŒŸ Excellent!' : 'Keep practicing!'}`;
        resultDiv.className = "result-area " + (score === 5 ? "correct" : "");
    }
</script>

</body>
</html>

